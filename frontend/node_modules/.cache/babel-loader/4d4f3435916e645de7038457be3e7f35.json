{"ast":null,"code":"import Clarifai from 'clarifai';\nimport { response } from 'express';\n\nclass ClarifaiApp {\n  constructor() {\n    this.calculateFaceLocation = data => {\n      const clarifaiFace = data['outputs'][0]['data']['regions'][0].region_info.bounding_box;\n      const image = document.getElementById('inputImage');\n      const width = Number(image.width);\n      const height = Number(image.height);\n      return {\n        leftCol: clarifaiFace.left_col * width,\n        rightCol: width - clarifaiFace.right_col * width,\n        topRow: clarifaiFace.top_row * height,\n        bottomRow: height - clarifaiFace.bottom_row * height\n      };\n    };\n\n    this.getFaceLocation = imgUrl => {\n      return this.faceDetectionApi(imgUrl).then(resp => this.calculateFaceLocation(resp));\n    };\n\n    this.app = new Clarifai.App({\n      apiKey: '373b18531b924a42be1645f92ea499c7'\n    });\n  }\n\n  faceDetectionApi(imgURL) {\n    return this.app.models.initModel({\n      id: Clarifai.FACE_DETECT_MODEL\n    }).then(faceModel => faceModel.predict(imgURL)).catch(err => console.log(err));\n  }\n\n}\n\nexport default new ClarifaiApp();","map":{"version":3,"sources":["/Users/mariamelbarbary/Desktop/learn_js/small projects/facerecognitionbrain/src/ClarifaiApi.js"],"names":["Clarifai","response","ClarifaiApp","constructor","calculateFaceLocation","data","clarifaiFace","region_info","bounding_box","image","document","getElementById","width","Number","height","leftCol","left_col","rightCol","right_col","topRow","top_row","bottomRow","bottom_row","getFaceLocation","imgUrl","faceDetectionApi","then","resp","app","App","apiKey","imgURL","models","initModel","id","FACE_DETECT_MODEL","faceModel","predict","catch","err","console","log"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,UAArB;AACA,SAASC,QAAT,QAAyB,SAAzB;;AAEA,MAAMC,WAAN,CAAkB;AACdC,EAAAA,WAAW,GAAG;AAAA,SAgBdC,qBAhBc,GAgBWC,IAAD,IAAU;AAC9B,YAAMC,YAAY,GAAGD,IAAI,CAAC,SAAD,CAAJ,CAAgB,CAAhB,EAAmB,MAAnB,EAA2B,SAA3B,EAAsC,CAAtC,EAAyCE,WAAzC,CAAqDC,YAA1E;AACA,YAAMC,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAd;AACA,YAAMC,KAAK,GAAGC,MAAM,CAACJ,KAAK,CAACG,KAAP,CAApB;AACA,YAAME,MAAM,GAAGD,MAAM,CAACJ,KAAK,CAACK,MAAP,CAArB;AAEA,aAAO;AACHC,QAAAA,OAAO,EAAET,YAAY,CAACU,QAAb,GAAwBJ,KAD9B;AAEHK,QAAAA,QAAQ,EAAEL,KAAK,GAAIN,YAAY,CAACY,SAAb,GAAyBN,KAFzC;AAGHO,QAAAA,MAAM,EAAEb,YAAY,CAACc,OAAb,GAAuBN,MAH5B;AAIHO,QAAAA,SAAS,EAAEP,MAAM,GAAIR,YAAY,CAACgB,UAAb,GAA0BR;AAJ5C,OAAP;AAMH,KA5Ba;;AAAA,SA8BdS,eA9Bc,GA8BKC,MAAD,IAAY;AAC1B,aACI,KAAKC,gBAAL,CAAsBD,MAAtB,EACKE,IADL,CACUC,IAAI,IAAI,KAAKvB,qBAAL,CAA2BuB,IAA3B,CADlB,CADJ;AAIH,KAnCa;;AACV,SAAKC,GAAL,GAAW,IAAI5B,QAAQ,CAAC6B,GAAb,CAAiB;AACxBC,MAAAA,MAAM,EAAE;AADgB,KAAjB,CAAX;AAGH;;AAEDL,EAAAA,gBAAgB,CAACM,MAAD,EAAS;AACrB,WACI,KAAKH,GAAL,CAASI,MAAT,CAAgBC,SAAhB,CAA0B;AACtBC,MAAAA,EAAE,EAAElC,QAAQ,CAACmC;AADS,KAA1B,EAGKT,IAHL,CAGUU,SAAS,IAAIA,SAAS,CAACC,OAAV,CAAkBN,MAAlB,CAHvB,EAIKO,KAJL,CAIWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAJlB,CADJ;AAOH;;AAfa;;AAwClB,eAAe,IAAIrC,WAAJ,EAAf","sourcesContent":["import Clarifai from 'clarifai'\nimport { response } from 'express';\n\nclass ClarifaiApp {\n    constructor() {\n        this.app = new Clarifai.App({\n            apiKey: '373b18531b924a42be1645f92ea499c7'\n        });\n    }\n\n    faceDetectionApi(imgURL) {\n        return (\n            this.app.models.initModel({\n                id: Clarifai.FACE_DETECT_MODEL,\n            })\n                .then(faceModel => faceModel.predict(imgURL))\n                .catch(err => console.log(err))\n        );\n    }\n\n    calculateFaceLocation = (data) => {\n        const clarifaiFace = data['outputs'][0]['data']['regions'][0].region_info.bounding_box;\n        const image = document.getElementById('inputImage');\n        const width = Number(image.width)\n        const height = Number(image.height)\n\n        return {\n            leftCol: clarifaiFace.left_col * width,\n            rightCol: width - (clarifaiFace.right_col * width),\n            topRow: clarifaiFace.top_row * height,\n            bottomRow: height - (clarifaiFace.bottom_row * height),\n        }\n    }\n\n    getFaceLocation = (imgUrl) => {\n        return (\n            this.faceDetectionApi(imgUrl)\n                .then(resp => this.calculateFaceLocation(resp))\n        )\n    }\n\n}\n\nexport default new ClarifaiApp();"]},"metadata":{},"sourceType":"module"}